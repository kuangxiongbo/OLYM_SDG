# SDG多账号控制系统 - 测试用例文档

## 测试概述

本文档包含SDG多账号控制系统的完整测试用例，涵盖功能测试、界面测试、API测试和场景测试。

## 测试环境

- **应用地址**: http://localhost:5000
- **测试账号**: 
  - 普通用户: test@example.com / test123
  - 管理员: admin@sdg.com / admin123
- **测试工具**: curl, 浏览器

---

## 1. 页面功能测试用例

### 1.1 首页测试用例

#### TC001 - 首页加载测试
- **测试目标**: 验证首页正常加载
- **测试步骤**:
  1. 访问 http://localhost:5000
  2. 检查页面标题为"首页 - SDG多账号控制系统"
  3. 验证Bootstrap和FontAwesome资源加载
  4. 检查导航栏显示
- **预期结果**: 页面正常显示，所有资源加载成功
- **测试命令**: `curl -s http://localhost:5000/ | head -20`

#### TC002 - 首页统计数据显示
- **测试目标**: 验证首页统计数据正常显示
- **测试步骤**:
  1. 访问首页
  2. 检查系统统计卡片显示
  3. 验证API调用 `/api/status`
- **预期结果**: 显示用户数、数据源数、任务数等统计信息
- **测试命令**: `curl -s http://localhost:5000/api/status`

#### TC003 - 未登录用户首页
- **测试目标**: 验证未登录用户的首页显示
- **测试步骤**:
  1. 未登录状态下访问首页
  2. 检查登录/注册按钮显示
  3. 验证工具入口需要登录提示
- **预期结果**: 显示登录注册按钮，工具入口提示需要登录

#### TC004 - 已登录用户首页
- **测试目标**: 验证已登录用户的首页显示
- **测试步骤**:
  1. 登录后访问首页
  2. 检查用户信息显示
  3. 验证工具入口可点击
- **预期结果**: 显示用户信息，工具入口可正常访问

### 1.2 认证页面测试用例

#### TC005 - 登录页面加载
- **测试目标**: 验证登录页面正常加载
- **测试步骤**:
  1. 访问 http://localhost:5000/auth/login
  2. 检查页面标题为"登录 - SDG多账号控制系统"
  3. 验证登录表单字段完整
- **预期结果**: 登录页面正常显示，表单字段完整
- **测试命令**: `curl -s http://localhost:5000/auth/login | head -15`

#### TC006 - 用户登录功能
- **测试目标**: 验证用户登录功能
- **测试步骤**:
  1. 使用有效凭据登录
  2. 检查登录响应
  3. 验证用户信息返回
- **预期结果**: 登录成功，返回用户信息
- **测试命令**: `curl -s -X POST http://localhost:5000/auth/login -H "Content-Type: application/json" -d '{"email":"test@example.com","password":"test123"}'`

#### TC007 - 管理员登录功能
- **测试目标**: 验证管理员登录功能
- **测试步骤**:
  1. 使用管理员凭据登录
  2. 检查角色信息
  3. 验证管理员权限
- **预期结果**: 登录成功，角色为super_admin
- **测试命令**: `curl -s -X POST http://localhost:5000/auth/login -H "Content-Type: application/json" -d '{"email":"admin@sdg.com","password":"admin123"}'`

#### TC008 - 登录失败处理
- **测试目标**: 验证登录失败处理
- **测试步骤**:
  1. 使用无效凭据登录
  2. 检查错误响应
  3. 验证错误消息
- **预期结果**: 返回401状态码和错误消息

#### TC009 - 注册页面加载
- **测试目标**: 验证注册页面正常加载
- **测试步骤**:
  1. 访问 http://localhost:5000/auth/register
  2. 检查页面标题为"注册 - SDG多账号控制系统"
  3. 验证注册表单字段完整
- **预期结果**: 注册页面正常显示，表单字段完整
- **测试命令**: `curl -s http://localhost:5000/auth/register | head -15`

#### TC010 - 用户注册功能
- **测试目标**: 验证用户注册功能
- **测试步骤**:
  1. 填写有效的注册信息
  2. 提交注册表单
  3. 检查注册响应
- **预期结果**: 注册成功，返回用户信息

#### TC011 - 认证状态检查
- **测试目标**: 验证认证状态检查功能
- **测试步骤**:
  1. 调用认证检查API
  2. 检查返回状态
  3. 验证用户信息
- **预期结果**: 正确返回认证状态
- **测试命令**: `curl -s http://localhost:5000/auth/check-auth`

### 1.3 工具页面测试用例

#### TC012 - 合成数据生成页面
- **测试目标**: 验证合成数据生成页面
- **测试步骤**:
  1. 登录后访问 http://localhost:5000/synthetic-data
  2. 检查页面标题为"合成数据生成 - SDG多账号控制系统"
  3. 验证页面功能组件
- **预期结果**: 页面正常显示，功能组件完整
- **测试命令**: `curl -s http://localhost:5000/synthetic-data | head -10`

#### TC013 - 质量评估页面
- **测试目标**: 验证质量评估页面
- **测试步骤**:
  1. 登录后访问 http://localhost:5000/quality-evaluation
  2. 检查页面标题为"质量评估 - SDG多账号控制系统"
  3. 验证页面功能组件
- **预期结果**: 页面正常显示，功能组件完整
- **测试命令**: `curl -s http://localhost:5000/quality-evaluation | head -10`

#### TC014 - 敏感字段发现页面
- **测试目标**: 验证敏感字段发现页面
- **测试步骤**:
  1. 登录后访问 http://localhost:5000/sensitive-detection
  2. 检查页面标题为"敏感字段发现 - SDG多账号控制系统"
  3. 验证页面功能组件
- **预期结果**: 页面正常显示，功能组件完整
- **测试命令**: `curl -s http://localhost:5000/sensitive-detection | head -10`

#### TC015 - 数据源管理页面
- **测试目标**: 验证数据源管理页面
- **测试步骤**:
  1. 登录后访问 http://localhost:5000/data-sources
  2. 检查页面标题为"数据源管理 - SDG多账号控制系统"
  3. 验证数据源列表功能
- **预期结果**: 页面正常显示，数据源功能完整
- **测试命令**: `curl -s http://localhost:5000/data-sources | head -10`

#### TC016 - 模型配置页面
- **测试目标**: 验证模型配置页面
- **测试步骤**:
  1. 登录后访问 http://localhost:5000/model-configs
  2. 检查页面标题为"模型配置 - SDG多账号控制系统"
  3. 验证配置管理功能
- **预期结果**: 页面正常显示，配置功能完整
- **测试命令**: `curl -s http://localhost:5000/model-configs | head -10`

#### TC017 - 个人资料页面
- **测试目标**: 验证个人资料页面
- **测试步骤**:
  1. 登录后访问 http://localhost:5000/profile
  2. 检查页面标题为"个人资料 - SDG多账号控制系统"
  3. 验证用户信息显示
- **预期结果**: 页面正常显示，用户信息完整
- **测试命令**: `curl -s http://localhost:5000/profile | head -10`

#### TC018 - 管理后台页面
- **测试目标**: 验证管理后台页面
- **测试步骤**:
  1. 管理员登录后访问 http://localhost:5000/admin
  2. 检查页面标题为"管理后台 - SDG多账号控制系统"
  3. 验证管理员功能
- **预期结果**: 页面正常显示，管理员功能完整
- **测试命令**: `curl -s http://localhost:5000/admin | head -10`

### 1.4 权限控制测试用例

#### TC019 - 未登录访问保护页面
- **测试目标**: 验证未登录用户访问保护页面
- **测试步骤**:
  1. 未登录状态下访问工具页面
  2. 检查重定向到登录页面
  3. 验证重定向URL包含next参数
- **预期结果**: 重定向到登录页面，URL包含next参数
- **测试命令**: `curl -s http://localhost:5000/synthetic-data | head -5`

#### TC020 - 普通用户访问管理后台
- **测试目标**: 验证普通用户访问管理后台
- **测试步骤**:
  1. 普通用户登录后访问管理后台
  2. 检查权限控制
  3. 验证错误处理
- **预期结果**: 显示权限不足错误，重定向到首页

#### TC021 - 管理员访问管理后台
- **测试目标**: 验证管理员访问管理后台
- **测试步骤**:
  1. 管理员登录后访问管理后台
  2. 检查页面正常显示
  3. 验证管理员功能可用
- **预期结果**: 管理后台正常显示，功能可用

---

## 2. API接口测试用例

### 2.1 系统状态API测试

#### TC022 - 健康检查API
- **测试目标**: 验证健康检查API
- **测试步骤**:
  1. 调用 `/health` API
  2. 检查返回状态
  3. 验证系统信息
- **预期结果**: 返回200状态码，包含系统健康信息
- **测试命令**: `curl -s http://localhost:5000/health`

#### TC023 - 系统状态API
- **测试目标**: 验证系统状态API
- **测试步骤**:
  1. 调用 `/api/status` API
  2. 检查统计数据
  3. 验证数据完整性
- **预期结果**: 返回统计数据，包含用户数、数据源数等
- **测试命令**: `curl -s http://localhost:5000/api/status`

#### TC024 - 用户列表API
- **测试目标**: 验证用户列表API
- **测试步骤**:
  1. 登录后调用 `/api/users` API
  2. 检查用户列表
  3. 验证用户信息完整性
- **预期结果**: 返回用户列表，包含完整用户信息
- **测试命令**: `curl -s http://localhost:5000/api/users`

#### TC025 - 管理员统计API
- **测试目标**: 验证管理员统计API
- **测试步骤**:
  1. 管理员登录后调用 `/api/admin/stats` API
  2. 检查统计数据
  3. 验证权限控制
- **预期结果**: 返回管理员统计数据
- **测试命令**: `curl -s http://localhost:5000/api/admin/stats`

### 2.2 数据源API测试

#### TC026 - 数据源列表API
- **测试目标**: 验证数据源列表API
- **测试步骤**:
  1. 登录后调用 `/api/data-sources` API
  2. 检查数据源列表
  3. 验证数据完整性
- **预期结果**: 返回用户的数据源列表
- **测试命令**: `curl -s http://localhost:5000/api/data-sources`

---

## 3. 核心场景测试用例

### 3.1 用户注册登录场景

#### TC027 - 完整用户注册登录流程
- **测试目标**: 验证完整的用户注册登录流程
- **测试步骤**:
  1. 访问注册页面
  2. 填写注册信息并提交
  3. 检查注册成功响应
  4. 使用注册的账号登录
  5. 验证登录成功
  6. 检查用户信息显示
- **预期结果**: 注册成功，登录成功，用户信息正确显示

#### TC028 - 用户权限验证场景
- **测试目标**: 验证用户权限控制
- **测试步骤**:
  1. 普通用户登录
  2. 访问工具页面（应该成功）
  3. 访问管理后台（应该失败）
  4. 管理员登录
  5. 访问管理后台（应该成功）
- **预期结果**: 权限控制正确，普通用户无法访问管理功能

### 3.2 工具使用场景

#### TC029 - 合成数据生成完整流程
- **测试目标**: 验证合成数据生成完整流程
- **测试步骤**:
  1. 登录后访问合成数据页面
  2. 选择数据源
  3. 配置生成参数
  4. 开始生成过程
  5. 查看生成结果
  6. 下载或保存结果
- **预期结果**: 完整流程正常执行，结果正确

#### TC030 - 质量评估完整流程
- **测试目标**: 验证质量评估完整流程
- **测试步骤**:
  1. 登录后访问质量评估页面
  2. 选择原始数据和合成数据
  3. 配置评估参数
  4. 开始评估过程
  5. 查看评估结果
  6. 生成评估报告
- **预期结果**: 完整流程正常执行，评估结果准确

#### TC031 - 敏感字段发现完整流程
- **测试目标**: 验证敏感字段发现完整流程
- **测试步骤**:
  1. 登录后访问敏感字段发现页面
  2. 选择数据源
  3. 配置检测参数
  4. 开始检测过程
  5. 查看检测结果
  6. 生成检测报告
- **预期结果**: 完整流程正常执行，检测结果准确

### 3.3 数据管理场景

#### TC032 - 数据源管理完整流程
- **测试目标**: 验证数据源管理完整流程
- **测试步骤**:
  1. 登录后访问数据源管理页面
  2. 上传新的数据源
  3. 查看数据源列表
  4. 预览数据源内容
  5. 编辑数据源信息
  6. 删除不需要的数据源
- **预期结果**: 数据源管理功能完整，操作成功

#### TC033 - 模型配置管理流程
- **测试目标**: 验证模型配置管理流程
- **测试步骤**:
  1. 登录后访问模型配置页面
  2. 创建新的模型配置
  3. 编辑现有配置
  4. 设置默认配置
  5. 删除不需要的配置
- **预期结果**: 模型配置管理功能完整，操作成功

### 3.4 系统管理场景

#### TC034 - 管理员系统管理流程
- **测试目标**: 验证管理员系统管理流程
- **测试步骤**:
  1. 管理员登录
  2. 访问管理后台
  3. 查看系统统计信息
  4. 管理用户账户
  5. 监控系统性能
  6. 查看系统日志
- **预期结果**: 管理员功能完整，系统管理正常

---

## 4. 静态资源测试用例

### 4.1 资源加载测试

#### TC035 - CSS资源加载测试
- **测试目标**: 验证CSS资源正常加载
- **测试步骤**:
  1. 访问 `/static/css/main.css`
  2. 检查HTTP状态码
  3. 验证Content-Type
  4. 检查文件大小
- **预期结果**: 返回200状态码，Content-Type为text/css
- **测试命令**: `curl -s -I http://localhost:5000/static/css/main.css`

#### TC036 - JavaScript资源加载测试
- **测试目标**: 验证JavaScript资源正常加载
- **测试步骤**:
  1. 访问 `/static/js/main.js`
  2. 检查HTTP状态码
  3. 验证Content-Type
  4. 检查文件大小
- **预期结果**: 返回200状态码，Content-Type为text/javascript
- **测试命令**: `curl -s -I http://localhost:5000/static/js/main.js`

---

## 5. 性能测试用例

### 5.1 响应时间测试

#### TC037 - 页面响应时间测试
- **测试目标**: 验证页面响应时间
- **测试步骤**:
  1. 测量首页加载时间
  2. 测量登录页面加载时间
  3. 测量工具页面加载时间
  4. 记录响应时间
- **预期结果**: 所有页面响应时间 < 2秒

#### TC038 - API响应时间测试
- **测试目标**: 验证API响应时间
- **测试步骤**:
  1. 测量健康检查API响应时间
  2. 测量状态API响应时间
  3. 测量用户API响应时间
  4. 记录响应时间
- **预期结果**: 所有API响应时间 < 1秒

---

## 6. 兼容性测试用例

### 6.1 浏览器兼容性测试

#### TC039 - 现代浏览器兼容性
- **测试目标**: 验证现代浏览器兼容性
- **测试步骤**:
  1. 在Chrome中测试所有页面
  2. 在Firefox中测试所有页面
  3. 在Safari中测试所有页面
  4. 在Edge中测试所有页面
- **预期结果**: 所有浏览器中页面正常显示

#### TC040 - 移动端兼容性测试
- **测试目标**: 验证移动端兼容性
- **测试步骤**:
  1. 在移动设备上测试首页
  2. 测试登录注册功能
  3. 测试工具页面响应式设计
  4. 验证触摸操作
- **预期结果**: 移动端页面正常显示，功能可用

---

## 7. 安全性测试用例

### 7.1 认证安全测试

#### TC041 - 密码安全测试
- **测试目标**: 验证密码安全机制
- **测试步骤**:
  1. 测试弱密码拒绝
  2. 测试密码加密存储
  3. 测试密码强度验证
- **预期结果**: 密码安全机制正常工作

#### TC042 - 会话安全测试
- **测试目标**: 验证会话安全
- **测试步骤**:
  1. 测试会话超时
  2. 测试会话劫持防护
  3. 测试CSRF防护
- **预期结果**: 会话安全机制正常工作

---

## 测试执行计划

### 测试阶段
1. **单元测试阶段**: 执行TC001-TC025（页面和API测试）
2. **集成测试阶段**: 执行TC026-TC034（核心场景测试）
3. **系统测试阶段**: 执行TC035-TC042（资源和性能测试）

### 测试环境要求
- Python 3.13+
- Flask应用运行在localhost:5000
- 测试数据库已初始化
- 测试账号已创建

### 测试通过标准
- 所有测试用例通过率 ≥ 95%
- 关键功能测试用例100%通过
- 性能测试满足要求
- 安全性测试无重大漏洞

---

## 测试报告模板

### 测试执行记录
- 测试用例ID: TC001
- 执行时间: 2025-09-27 22:30:00
- 执行结果: PASS/FAIL
- 实际结果: 详细描述
- 问题描述: 如有问题请描述

### 测试总结
- 总测试用例数: 42
- 通过用例数: X
- 失败用例数: Y
- 通过率: X/42 * 100%
- 主要问题: 问题总结
- 建议: 改进建议

